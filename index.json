[{"content":"bucket 策略配置 以下例子存储桶名称为pic，将 pic 设置为只读。\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;AWS\u0026#34;: [ \u0026#34;*\u0026#34; ] }, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetObject\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic/**\u0026#34; ] } ] } access token 策略设置 access token 拥有读写权限。\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetBucketLocation\u0026#34;, \u0026#34;s3:ListBucket\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic\u0026#34; ] }, { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetObject\u0026#34;, \u0026#34;s3:PutObject\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic/*\u0026#34; ] } ] } ","permalink":"https://k997.github.io/post/minio-image-hosting/","summary":"bucket 策略配置 以下例子存储桶名称为pic，将 pic 设置为只读。\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;AWS\u0026#34;: [ \u0026#34;*\u0026#34; ] }, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetObject\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic/**\u0026#34; ] } ] } access token 策略设置 access token 拥有读写权限。\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetBucketLocation\u0026#34;, \u0026#34;s3:ListBucket\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic\u0026#34; ] }, { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetObject\u0026#34;, \u0026#34;s3:PutObject\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:s3:::pic/*\u0026#34; ] } ] } ","title":"minio作为图床的 bucket 及 token 策略配置"},{"content":"背景 archlinux 默认安装的 bochs 不带 debug gui，调试程序时候需要在 bochs 手动打印寄存器及其他信息，通过 bochs 的 debug gui 可以方便查看程序相关信息。\n创建 PKGBUILD 文件 mkdir bochs-enhanced-debugger touch PKGBUILD 参考AUR (en) - bochs-gdb-stub (archlinux.org)\npkgname=bochs-enhanced-debugger pkgver=2.7 pkgrel=1 pkgdesc=\u0026#34;A portable x86 PC emulation software package with enhanced debugger\u0026#34; arch=(\u0026#39;x86_64\u0026#39;) url=\u0026#34;http://bochs.sourceforge.net/\u0026#34; license=(\u0026#39;LGPL\u0026#39;) depends=(\u0026#39;gcc-libs\u0026#39; \u0026#39;libxrandr\u0026#39; \u0026#39;libxpm\u0026#39; \u0026#39;gtk2\u0026#39;) replaces=(\u0026#34;bochs-enhanced-debugger\u0026#34;) conflicts=(\u0026#34;bochs-enhanced-debugger\u0026#34;) source=(\u0026#34;http://downloads.sourceforge.net/sourceforge/bochs/bochs-$pkgver.tar.gz\u0026#34;) sha256sums=(\u0026#39;a010ab1bfdc72ac5a08d2e2412cd471c0febd66af1d9349bc0d796879de5b17a\u0026#39;) prepare() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; # 4.X kernel is basically 3.20 sed -i \u0026#39;s/2\\.6\\*|3\\.\\*)/2.6*|3.*|4.*)/\u0026#39; configure* } build() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; ./configure \\ --prefix=/usr \\ --without-wx \\ --with-x11 \\ --with-x \\ --with-term \\ --disable-docbook \\ --enable-cpu-level=6 \\ --enable-fpu \\ --enable-3dnow \\ --enable-disasm \\ --enable-long-phy-address \\ --enable-disasm \\ --enable-pcidev \\ --enable-usb \\ --enable-iodebug \\ --enable-smp \\ --enable-x86-64 \\ --enable-avx \\ --enable-evex \\ --enable-debugger \\ --enable-x86-debugger \\ --enable-debugger-gui #--with-sdl #--enable-all-optimizations #--enable-plugins sed -i \u0026#39;s/^LIBS = /LIBS = -lpthread/g\u0026#39; Makefile make -j $(nproc) } package() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; make DESTDIR=\u0026#34;$pkgdir\u0026#34; install install -Dm644 .bochsrc \u0026#34;$pkgdir/etc/bochsrc-sample.txt\u0026#34; cd \u0026#34;$pkgdir/usr/bin/\u0026#34; mv bochs bochs-enhanced-debugger rm bximage cd \u0026#34;$pkgdir/usr/\u0026#34; rm -rfv share cd \u0026#34;$pkgdir\u0026#34; rm -rfv etc } 打包安装 bochs debugger gui makepkg sudo pacman -U bochs-enhanced-debugger*.pkg.tar.zst bochs 配置文件 配置文件末尾添加 display_library: x, options=\u0026quot;gui_debug\u0026quot;\n启动 bochs bochs -f bochs.bxrc ","permalink":"https://k997.github.io/post/archlinux-build-bochs-debugger-gui/","summary":"背景 archlinux 默认安装的 bochs 不带 debug gui，调试程序时候需要在 bochs 手动打印寄存器及其他信息，通过 bochs 的 debug gui 可以方便查看程序相关信息。\n创建 PKGBUILD 文件 mkdir bochs-enhanced-debugger touch PKGBUILD 参考AUR (en) - bochs-gdb-stub (archlinux.org)\npkgname=bochs-enhanced-debugger pkgver=2.7 pkgrel=1 pkgdesc=\u0026#34;A portable x86 PC emulation software package with enhanced debugger\u0026#34; arch=(\u0026#39;x86_64\u0026#39;) url=\u0026#34;http://bochs.sourceforge.net/\u0026#34; license=(\u0026#39;LGPL\u0026#39;) depends=(\u0026#39;gcc-libs\u0026#39; \u0026#39;libxrandr\u0026#39; \u0026#39;libxpm\u0026#39; \u0026#39;gtk2\u0026#39;) replaces=(\u0026#34;bochs-enhanced-debugger\u0026#34;) conflicts=(\u0026#34;bochs-enhanced-debugger\u0026#34;) source=(\u0026#34;http://downloads.sourceforge.net/sourceforge/bochs/bochs-$pkgver.tar.gz\u0026#34;) sha256sums=(\u0026#39;a010ab1bfdc72ac5a08d2e2412cd471c0febd66af1d9349bc0d796879de5b17a\u0026#39;) prepare() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; # 4.X kernel is basically 3.20 sed -i \u0026#39;s/2\\.6\\*|3\\.\\*)/2.6*|3.*|4.*)/\u0026#39; configure* } build() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; ./configure \\ --prefix=/usr \\ --without-wx \\ --with-x11 \\ --with-x \\ --with-term \\ --disable-docbook \\ --enable-cpu-level=6 \\ --enable-fpu \\ --enable-3dnow \\ --enable-disasm \\ --enable-long-phy-address \\ --enable-disasm \\ --enable-pcidev \\ --enable-usb \\ --enable-iodebug \\ --enable-smp \\ --enable-x86-64 \\ --enable-avx \\ --enable-evex \\ --enable-debugger \\ --enable-x86-debugger \\ --enable-debugger-gui #--with-sdl #--enable-all-optimizations #--enable-plugins sed -i \u0026#39;s/^LIBS = /LIBS = -lpthread/g\u0026#39; Makefile make -j $(nproc) } package() { cd \u0026#34;$srcdir/bochs-$pkgver\u0026#34; make DESTDIR=\u0026#34;$pkgdir\u0026#34; install install -Dm644 .","title":"Archlinux  Build Bochs Debugger Gui"},{"content":"背景 服务器上 systemd-resolved 经常挂掉，导致无法解析域名，排查问题无果遂决定使用 bind 替代 systemd-resolved 。\n安装 bind sudo apt update sudo apt install bind9 编辑配置文件 编辑 bind 配置文件 /etc/bind/named.conf.options , 配置上游 dns 服务器 forwarders { 8.8.8.8;}; 及监听地址 listen-on { any; }; ,最终配置文件如下：\noptions { directory \u0026#34;/var/cache/bind\u0026#34;; // If there is a firewall between you and nameservers you want // to talk to, you may need to fix the firewall to allow multiple // ports to talk. See http://www.kb.cert.org/vuls/id/800113 // If your ISP provided one or more IP addresses for stable // nameservers, you probably want to use them as forwarders. // Uncomment the following block, and insert the addresses replacing // the all-0\u0026#39;s placeholder. forwarders { 8.8.8.8; }; //======================================================================== // If BIND logs error messages about the root key being expired, // you will need to update your keys. See https://www.isc.org/bind-keys //======================================================================== dnssec-validation auto; auth-nxdomain no; # conform to RFC1035 listen-on { any; }; listen-on-v6 { any; }; }; 启用 bind 服务 # 禁用 systemd-resolved sudo systemctl disable systemd-resolved.service # 启用 bind sudo systemctl enable bind9 --now ","permalink":"https://k997.github.io/post/config-dns-service-with-bind-under-ubuntu/","summary":"背景 服务器上 systemd-resolved 经常挂掉，导致无法解析域名，排查问题无果遂决定使用 bind 替代 systemd-resolved 。\n安装 bind sudo apt update sudo apt install bind9 编辑配置文件 编辑 bind 配置文件 /etc/bind/named.conf.options , 配置上游 dns 服务器 forwarders { 8.8.8.8;}; 及监听地址 listen-on { any; }; ,最终配置文件如下：\noptions { directory \u0026#34;/var/cache/bind\u0026#34;; // If there is a firewall between you and nameservers you want // to talk to, you may need to fix the firewall to allow multiple // ports to talk. See http://www.","title":"Ubuntu 下 Bind 配置 Dns 域名服务"},{"content":"hugo 安装 github 创建仓库\ngit clone 仓库至本地\n创建hugo项目\ncd \u0026lt;仓库根目录\u0026gt; hugo new site . --force -f yml --force表示在已存在文件夹下创建网站 -f yml表示 hugo 的 config 使用 YAML 格式\n导入主题模板，此处使用 PaperMod 主题\ngit submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod git submodule update --init --recursive 编辑目录下的 config.yaml 文件\nbaseURL: \u0026#34;https://k997.github.io\u0026#34; title: kong paginate: 7 theme: PaperMod enableInlineShortcodes: true enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false enableEmoji: true pygmentsUseClasses: true # googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true menu: main: - identifier: archives name: 归档 url: archives/ weight: 5 - identifier: search name: 搜索 url: search/ weight: 20 - identifier: categories name: 分类 url: categories/ weight: 10 - identifier: tags name: 标签 url: tags/ weight: 10 outputs: home: - HTML - RSS - JSON params: env: production # to enable google analytics, opengraph, twitter-cards and schema. description: \u0026#34;kong\u0026#39;s blog - k997.github.io\u0026#34; author: kong # author: [\u0026#34;Me\u0026#34;, \u0026#34;You\u0026#34;] # multiple authors defaultTheme: auto # disableThemeToggle: true ShowShareButtons: true ShowReadingTime: true ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: true ShowToc: true disableSpecial1stPost: false disableScrollToTop: false displayFullLangName: true # comments: false hidemeta: false hideSummary: false images: [\u0026#34;papermod-cover.png\u0026#34;] profileMode: enabled: false title: \u0026#34;kong\u0026#39;s blog\u0026#34; imageUrl: \u0026#34;#\u0026#34; # imageTitle: my image # imageWidth: 120 # imageHeight: 120 buttons: - name: Archives url: archives - name: Tags url: tags homeInfoParams: Title: \u0026#34;kong\u0026#39;s blog\u0026#34; Content: \u0026gt; 一个喜欢折腾的人的简单博客 # - 短横线后的内容跟上一行的内容在网页上被识别为一行 socialIcons: - name: github url: \u0026#34;https://github.com/k997\u0026#34; # - name: KoFi # url: \u0026#34;https://ko-fi.com/adityatelange\u0026#34; - name: RsS url: \u0026#34;index.xml\u0026#34; # jump github to make suggestions editPost: URL: \u0026#34;https://github.com/k997/k997.github.io/tree/main/content\u0026#34; Text: \u0026#34;你对文章的建议\u0026#34; # edit text appendFilePath: true # to append file path to Edit link twikoo: # 版本需和twikoo的版本号要对得上 version: \u0026#34;1.6.7\u0026#34; envId: \u0026#34;https://twikoo.kongwg.top\u0026#34; # label: # text: \u0026#34;Home\u0026#34; # icon: icon.png # iconHeight: 35 # analytics: # google: # SiteVerificationTag: \u0026#34;XYZabc\u0026#34; # assets: # favicon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # favicon16x16: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # favicon32x32: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # apple_touch_icon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # safari_pinned_tab: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; # cover: # hidden: true # hide everywhere but not in structured data 是否在下面两种情况下显示 # hiddenInList: true # hide on list pages and home 是否在列表视图中显示 # hiddenInSingle: true # hide on single page 是否在单页视图中显示 # fuseOpts: # isCaseSensitive: false # shouldSort: true # location: 0 # distance: 1000 # threshold: 0.4 # minMatchCharLength: 0 # keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] taxonomies: category: categories tag: tags series: series markup: goldmark: renderer: unsafe: true # highlight: # # anchorLineNos: true # codeFences: true # guessSyntax: true # lineNos: true # # noClasses: false # style: monokai privacy: vimeo: disabled: false simple: true twitter: disabled: false enableDNT: true simple: true instagram: disabled: false simple: true youtube: disabled: false privacyEnhanced: true services: instagram: disableInlineCSS: true twitter: disableInlineCSS: true 汉化 分类\ncontent 目录下新建 categories\\_index.md:\n--- title: \u0026#34;分类\u0026#34; --- 标签 content 目录下新建 tags\\_index.md:\n--- title: \u0026#34;标签\u0026#34; --- 归档 content 目录下新建 archives.md:\n--- title: \u0026#34;归档\u0026#34; layout: \u0026#34;archives\u0026#34; # url: \u0026#34;/archives\u0026#34; summary: \u0026#34;archives\u0026#34; --- 搜索 content 目录下新建 search.md:\n--- title: \u0026#34;搜索\u0026#34; layout: \u0026#34;search\u0026#34; --- 评论系统 twikoo docker 部署 twikko\n此处用 traefik 反代 twikko，访问 twikoo 的链接即 twikoo 的 envId。\n部署完成后访问 twikoo 链接，获取 twikoo 版本。\nversion: \u0026#39;3\u0026#39; services: twikoo: image: imaegoo/twikoo restart: always volumes: - $DOCKER_DATA/twikoo:/app/data environment: - TWIKOO_THROTTLE=1000 # ip 访问频率限制 labels: - traefik.enable=true - traefik.http.routers.twikoo.rule=Host(`\u0026lt; twikoo 域名 \u0026gt;`) - traefik.http.routers.twikoo.tls=true - traefik.http.routers.twikoo.tls.certresolver=letsencrypt hugo 项目 layouts 目录下创建 partials/comments.html\nlayouts/partials/comments.html 会覆盖 papermod 下的 layouts/partials/comments.html。\n以下环境变量均在 hugo 配置文件夹中设置，无需手动修改。\n\u0026lt;!-- Twikoo --\u0026gt; \u0026lt;div\u0026gt; \u0026lt;div class=\u0026#34;pagination__title\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;pagination__title-h\u0026#34; style=\u0026#34;font-size: 20px;\u0026#34;\u0026gt;💬评论\u0026lt;/span\u0026gt; \u0026lt;hr /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;tcomment\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.staticfile.org/twikoo/{{ .Site.Params.twikoo.version }}/twikoo.all.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; twikoo.init({ envId: \u0026#34;{{ .Site.Params.twikoo.envId }}\u0026#34;, // envId el: \u0026#34;#tcomment\u0026#34;, // 容器元素 lang: \u0026#39;zh-CN\u0026#39;, // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/main/src/client/utils/i18n/index.js // region: \u0026#39;ap-guangzhou\u0026#39;, // 腾讯云环境地域，其他方式部署不填，默认为 ap-shanghai ，也可以为 ap-guangzhou // path: window.TWIKOO_MAGIC_PATH||window.location.pathname, // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数 }); \u0026lt;/script\u0026gt; \u0026lt;/div\u0026gt; hugo 配置文件中设置 twikoo 变量\n# config.yaml ... params: ... twikoo: # 版本需和twikoo的版本号要对得上 version: \u0026#34;\u0026lt; twikoo 版本 \u0026gt;\u0026#34; envId: \u0026#34;https://\u0026lt; twikoo 域名 \u0026gt;\u0026#34; 打开博客页面，点击评论框下的齿轮配置 twikoo 参数。\n参考 Hugo Papermod 主题配置与使用 Twikoo 文档 ","permalink":"https://k997.github.io/post/hugo-install-and-config/","summary":"hugo 安装 github 创建仓库\ngit clone 仓库至本地\n创建hugo项目\ncd \u0026lt;仓库根目录\u0026gt; hugo new site . --force -f yml --force表示在已存在文件夹下创建网站 -f yml表示 hugo 的 config 使用 YAML 格式\n导入主题模板，此处使用 PaperMod 主题\ngit submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod git submodule update --init --recursive 编辑目录下的 config.yaml 文件\nbaseURL: \u0026#34;https://k997.github.io\u0026#34; title: kong paginate: 7 theme: PaperMod enableInlineShortcodes: true enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false enableEmoji: true pygmentsUseClasses: true # googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true menu: main: - identifier: archives name: 归档 url: archives/ weight: 5 - identifier: search name: 搜索 url: search/ weight: 20 - identifier: categories name: 分类 url: categories/ weight: 10 - identifier: tags name: 标签 url: tags/ weight: 10 outputs: home: - HTML - RSS - JSON params: env: production # to enable google analytics, opengraph, twitter-cards and schema.","title":"hugo 安装及配置"}]